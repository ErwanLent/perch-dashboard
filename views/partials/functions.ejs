<%
numberWithCommas = function(x) {
	if (!isNumber(x)) {
		return x;
	}

    if (x % 1 != 0) {
        x = x.toFixed(2);
    }    

    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

isNumber = function(str) {
    const RE = /^-{0,1}\d*\.{0,1}\d+$/;
    return (RE.test(str));
}

htmlEscape = function(str) {
    return str
        .replace(/&/g, '&amp;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
}

htmlUnescape = function(str){
    return str
        .replace(/&quot;/g, '"')
        .replace(/&#39;/g, "'")
        .replace(/&lt;/g, '<')
        .replace(/&gt;/g, '>')
        .replace(/&amp;/g, '&');
}

todaysDate = function() {
    const dt = new Date();
    return `${dt.getMonth() + 1}/${dt.getDate()}/${dt.getFullYear()}`;
}

getLastWeek = function() {
    const today = new Date();
    const lastWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);
    return `${lastWeek.getMonth() + 1}/${lastWeek.getDate()}/${lastWeek.getFullYear()}`;
}

padArrayDecimals = function(numbers) {
    let arrayString = '[';
    for (const number of numbers) {
       arrayString += number.toFixed(2);
       arrayString += ',';
    }

    return arrayString.replace(/.$/,"]");
}
%>